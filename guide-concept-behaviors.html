<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/ef5db663/css/bootstrap.css" rel="stylesheet">
<link href="./assets/c596327a/solarized_light.css" rel="stylesheet">
<link href="./assets/956f8f39/style.css" rel="stylesheet">
<script src="./assets/2f771e29/jquery.js"></script>
<script src="./assets/ef5db663/js/bootstrap.js"></script>
<script src="./assets/b35220fb/jssearch.js"></script>    <title>Comportamientos (Behaviors) - Conceptos clave - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w16" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w16-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w16-collapse" class="collapse navbar-collapse"><ul id="w17" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-0" data-toggle="collapse" data-parent="#navigation">Introducción <b class="caret"></b></a><div id="navigation-0" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">Acerca de Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Actualizar desde Yii 1.1</a></div>
<a class="list-group-item" href="#navigation-1" data-toggle="collapse" data-parent="#navigation">Primeros pasos <b class="caret"></b></a><div id="navigation-1" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Instalar Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Funcionamiento de aplicaciones</a>
<a class="list-group-item" href="./guide-start-hello.html">Hola a todos</a>
<a class="list-group-item" href="./guide-start-forms.html">Trabajar con formularios</a>
<a class="list-group-item" href="./guide-start-databases.html">Trabajar con bases de datos</a>
<a class="list-group-item" href="./guide-start-gii.html">Generar códigos con Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Adentrarse en Yii</a></div>
<a class="list-group-item" href="#navigation-2" data-toggle="collapse" data-parent="#navigation">Estructura de una aplicación <b class="caret"></b></a><div id="navigation-2" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Información general</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Script de entrada</a>
<a class="list-group-item" href="./guide-structure-applications.html">Aplicaciones</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Componentes de una aplicación</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controladores</a>
<a class="list-group-item" href="./guide-structure-models.html">Modelos</a>
<a class="list-group-item" href="./guide-structure-views.html">Vistas</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filtros</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-modules.html">Módulos</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensiones</a></div>
<a class="list-group-item" href="#navigation-3" data-toggle="collapse" data-parent="#navigation">Gestión de las peticiones <b class="caret"></b></a><div id="navigation-3" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Información general</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing y Creación de las URL</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Peticiones (Requests)</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Respuestas (Responses)</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sesiones (Sessions) y Cookies</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Gestión de errores</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Registro de anotaciones</a></div>
<a class="list-group-item active" href="#navigation-4" data-toggle="collapse" data-parent="#navigation">Conceptos clave <b class="caret"></b></a><div id="navigation-4" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-concept-components.html">Componentes</a>
<a class="list-group-item" href="./guide-concept-properties.html">Propiedades</a>
<a class="list-group-item" href="./guide-concept-events.html">Eventos</a>
<a class="list-group-item active" href="./guide-concept-behaviors.html">Comportamientos (Behaviors)</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configuraciones</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Alias</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Autocarga de clases</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Localizador de servicios (Service Locator)</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Contenedor de inyección de dependencia</a></div>
<a class="list-group-item" href="#navigation-5" data-toggle="collapse" data-parent="#navigation">Trabajar con bases de datos <b class="caret"></b></a><div id="navigation-5" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Objeto de acceso a datos</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Constructor de consultas</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migraciones</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-6" data-toggle="collapse" data-parent="#navigation">Obtener datos de los usuarios <b class="caret"></b></a><div id="navigation-6" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Crear formularios</a>
<a class="list-group-item" href="./guide-input-validation.html">Validar datos</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Subir archivos</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Recogida de tabular input</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Obtener datos para múltiples modelos</a></div>
<a class="list-group-item" href="#navigation-7" data-toggle="collapse" data-parent="#navigation">Visualizar datos <b class="caret"></b></a><div id="navigation-7" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatting.html">Formato de datos</a>
<a class="list-group-item" href="./guide-output-pagination.html">Paginación</a>
<a class="list-group-item" href="./guide-output-sorting.html">Ordenación</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Proveedores de datos</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Widgets de datos</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Trabajar con scripts de cliente</a>
<a class="list-group-item" href="./guide-output-theming.html">Temas</a></div>
<a class="list-group-item" href="#navigation-8" data-toggle="collapse" data-parent="#navigation">Seguridad <b class="caret"></b></a><div id="navigation-8" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">Autenticación</a>
<a class="list-group-item" href="./guide-security-authorization.html">Autorización</a>
<a class="list-group-item" href="./guide-security-passwords.html">Trabajar con contraseñas</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">Autenticar Clientes</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Buenas prácticas</a></div>
<a class="list-group-item" href="#navigation-9" data-toggle="collapse" data-parent="#navigation">Caché <b class="caret"></b></a><div id="navigation-9" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Información general</a>
<a class="list-group-item" href="./guide-caching-data.html">Caché de datos</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Caché de fragmentos</a>
<a class="list-group-item" href="./guide-caching-page.html">Caché de páginas</a>
<a class="list-group-item" href="./guide-caching-http.html">Caché HTTP</a></div>
<a class="list-group-item" href="#navigation-10" data-toggle="collapse" data-parent="#navigation">Servicios Web RESTful <b class="caret"></b></a><div id="navigation-10" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Guía breve</a>
<a class="list-group-item" href="./guide-rest-resources.html">Recursos (Resources)</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controladores</a>
<a class="list-group-item" href="./guide-rest-routing.html">Gestión de rutas</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Formateo de respuestas</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Autenticación</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Límite de Rango</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Gestión de versiones</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Gestión de errores</a></div>
<a class="list-group-item" href="#navigation-11" data-toggle="collapse" data-parent="#navigation">Herramientas de Desarrollo <b class="caret"></b></a><div id="navigation-11" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide-es/README.md">Depurador y Barra de Herramientas de Depuración</a>
<a class="list-group-item" href="./guide-tool-gii.html">Generación de códigos con Gii</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">Generación de documentación de API</a></div>
<a class="list-group-item" href="#navigation-12" data-toggle="collapse" data-parent="#navigation">Pruebas <b class="caret"></b></a><div id="navigation-12" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Información general</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Configuración del entorno de pruebas</a>
<a class="list-group-item" href="./guide-test-unit.html">Pruebas unitarias</a>
<a class="list-group-item" href="./guide-test-functional.html">Pruebas funcionales</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Pruebas de aceptación</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item" href="#navigation-13" data-toggle="collapse" data-parent="#navigation">Temas especiales <b class="caret"></b></a><div id="navigation-13" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">Plantilla aplicación avanzada</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Creación de una aplicación desde cero</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Comandos de consola</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Validadores del núcleo</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internacionalización</a>
<a class="list-group-item" href="./guide-tutorial-mailing.html">Envío de correos electrónicos</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Mejora del rendimiento</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Entorno de alojamiento compartido</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Motores de plantillas</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Trabajar con Código de Terceros</a></div>
<a class="list-group-item" href="#navigation-14" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-14" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-es/README.md">Bootstrap Widgets</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-es/README.md">Jquery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-15" data-toggle="collapse" data-parent="#navigation">Clases auxiliares <b class="caret"></b></a><div id="navigation-15" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Información general</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Comportamientos <span id="comportamientos"></span><a href="#comportamientos" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#defining-behaviors">Definiendo comportamientos</a></li>
<li><a href="#gestion-de-eventos-de-componentes">Gestión de eventos de componentes</a></li>
<li><a href="#attaching-behaviors">Vinculando Comportamientos</a></li>
<li><a href="#using-behaviors">Usando comportamientos</a></li>
<li><a href="#detaching-behaviors">Desasociar Comportamientos</a></li>
<li><a href="#using-timestamp-behavior">Utilizando TimestampBehavior</a></li>
<li><a href="#comparison-with-traits">Comparación con Traits</a></li></ol></div>
<p>Comportamientos son instancias de <span class="broken-link">yii\base\Behavior</span> o sus clases "hija". Comportamientos, también conocido como
<a href="http://en.wikipedia.org/wiki/Mixin">mixins</a>, te permiten mejorar la funcionalidad de un <span class="broken-link">yii\base\Component</span>
existente sin necesidad de modificar su herencia de clases.
Cuando un comportamiento se une a un componente, "inyectará" sus métodos y propiedades dentro del componente, y podrás
acceder a esos métodos y propiedades como si hubieran estado definidos por la clase de componente. Además, un
comportamiento puede responder a <a href="guide-concept-events.html">eventos</a> disparados por el componente de modo que se pueda personalizar
o adaptar a la ejecución normal del código del componente.</p>
<h2>Definiendo comportamientos  <span id="defining-behaviors"></span><a href="#defining-behaviors" class="hashlink">&para;</a></h2><p>Para definir un comportamiento, se debe crear una clase que exiende <span class="broken-link">yii\base\Behavior</span>, o se extiende una clase hija. Por ejemplo:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">Behavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBehavior</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Behavior</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-variable">$prop1</span>;

    <span class="hljs-keyword">private</span> <span class="hljs-variable">$_prop2</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProp2</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;_prop2;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProp2</span><span class="hljs-params">(<span class="hljs-variable">$value</span>)</span>
    </span>{
        <span class="hljs-variable">$this</span>-&gt;_prop2 = <span class="hljs-variable">$value</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">foo</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>El código anterior define la clase de comportamiento (behavior) app\components\MyBehavior<code>, con dos propiedades --
</code>prop1<code> y </code>prop2<code>--y un método </code>foo()<code>. Tenga en cuenta que la propiedad </code>prop2<code>
se define a través de la getter </code>getProp2()<code> y el setter </code>setProp2()`. Este caso es porque <span class="broken-link">yii\base\Behavior</span> extiende <span class="broken-link">yii\base\Object</span> y por lo tanto se apoya en la definición de <a href="guide-concept-properties.html">propiedades</a> via getters y setters.</p>
<p>Debido a que esta clase es un comportamiento, cuando está unido a un componente, el componente también tienen la propiedad <code>prop1</code> y <code>prop2</code> y el método <code>foo()</code>.</p>
<blockquote class="tip"><p><strong>Tip: </strong>Dentro de un comportamiento, puede acceder al componente que el comportamiento está unido a través de la propiedad <span class="broken-link">yii\base\Behavior::owner</span>.</p>
</blockquote>
<h2>Gestión de eventos de componentes <span id="gestion-de-eventos-de-componentes"></span><a href="#gestion-de-eventos-de-componentes" class="hashlink">&para;</a></h2><p>Si un comportamiento necesita responder a los acontecimientos desencadenados por el componente al que está unido, se debe reemplazar el método <span class="broken-link">yii\base\Behavior::events()</span>. Por ejemplo:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">base</span>\<span class="hljs-title">Behavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyBehavior</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Behavior</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">events</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            ActiveRecord::EVENT_BEFORE_VALIDATE =&gt; <span class="hljs-string">'beforeValidate'</span>,
        ];
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">beforeValidate</span><span class="hljs-params">(<span class="hljs-variable">$event</span>)</span>
    </span>{
        <span class="hljs-comment">// ...</span>
    }
}
</code></pre>
<p>El método <span class="broken-link">yii\base\Behavior::events()</span> debe devolver una lista de eventos y sus correspondientes controladores.
El ejemplo anterior declara que el evento <span class="broken-link">yii\db\ActiveRecord::EVENT_BEFORE_VALIDATE</span> existe y esta  exists y define su controlador, <code>beforeValidate()</code>. Al especificar un controlador de eventos, puede utilizar uno de los siguientes formatos:</p>
<ul>
<li>una cadena que se refiere al nombre de un método de la clase del comportamiento, como el ejemplo anterior</li>
<li>un arreglo de objeto o nombre de clase, y un nombre de método como una cadena (sin paréntesis), ej., <code>[$object, 'methodName']</code>;</li>
<li>una función anónima </li>
</ul>
<p>La firma de un controlador de eventos debe ser la siguiente, donde <code>$ event</code> refiere al parámetro de evento. Por favor, consulte la sección <a href="guide-concept-events.html">Eventos</a> para más detalles sobre los eventos.</p>
<pre><code class="hljs php language-php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-params">(<span class="hljs-variable">$event</span>)</span> </span>{
}
</code></pre>
<h2>Vinculando Comportamientos  <span id="attaching-behaviors"></span><a href="#attaching-behaviors" class="hashlink">&para;</a></h2><p>Puedes vincular un comportamiento a un <span class="broken-link">yii\base\Component</span> ya sea estática o dinámicamente. La primera forma
es la más comúnmente utilizada en la práctica.</p>
<p>Para unir un comportamiento estáticamente, reemplaza el método <span class="broken-link">yii\base\Component::behaviors()</span> dde la clase de componente a la que se une el comportamiento. El método <span class="broken-link">yii\base\Component::behaviors()</span>  debe devolver una lista de comportamiento <a href="guide-concept-configurations.html">configuraciones</a>.
Cada configuración de comportamiento puede ser un nombre de clase de comportamiento o un arreglo de configuración:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">models</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>\<span class="hljs-title">MyBehavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActiveRecord</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            <span class="hljs-comment">// anonymous behavior, behavior class name only</span>
            MyBehavior::className(),

            <span class="hljs-comment">// named behavior, behavior class name only</span>
            <span class="hljs-string">'myBehavior2'</span> =&gt; MyBehavior::className(),

            <span class="hljs-comment">// anonymous behavior, configuration array</span>
            [
                <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
                <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
                <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
            ],

            <span class="hljs-comment">// named behavior, configuration array</span>
            <span class="hljs-string">'myBehavior4'</span> =&gt; [
                <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
                <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
                <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
            ]
        ];
    }
}
</code></pre>
<p>Puedes asociciar un nombre a un comportamiento especificándolo en la clave de la matriz correspondiente a la configuración
del comportamiento. En este caso, el comportamiento puede ser llamado un <em>comportamiento nombrado</em> (named behavior). En
el ejemplo anterior, hay dos tipos de comportamientos nombrados: <code>myBehavior2</code> y <code>myBehavior4</code>. Si un comportamiento
no está asociado con un nombre, se le llama <em>comportamiento anónimo</em> (anonymous behavior).</p>
<p>Para vincular un comportamiento dinámicamente, llama al método <span class="broken-link">yii\base\Component::attachBehavior()</span> desde el componente al
que se le va a unir el comportamiento:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">use</span> <span class="hljs-title">app</span>\<span class="hljs-title">components</span>\<span class="hljs-title">MyBehavior</span>;

<span class="hljs-comment">// vincular un objeto comportamiento "behavior"</span>
<span class="hljs-variable">$component</span>-&gt;attachBehavior(<span class="hljs-string">'myBehavior1'</span>, <span class="hljs-keyword">new</span> MyBehavior);

<span class="hljs-comment">// vincular una clase comportamiento</span>
<span class="hljs-variable">$component</span>-&gt;attachBehavior(<span class="hljs-string">'myBehavior2'</span>, MyBehavior::className());

<span class="hljs-comment">// asociar una matriz de configuración</span>
<span class="hljs-variable">$component</span>-&gt;attachBehavior(<span class="hljs-string">'myBehavior3'</span>, [
    <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
    <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
    <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
]);
</code></pre>
<p>Puede vincular múltiples comportamientos a la vez mediante el uso del método <span class="broken-link">yii\base\Component::attachBehaviors()</span>. Por ejemplo,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$component</span>-&gt;attachBehaviors([
    <span class="hljs-string">'myBehavior1'</span> =&gt; <span class="hljs-keyword">new</span> MyBehavior,  <span class="hljs-comment">// un comportamiento nombrado</span>
    MyBehavior::className(),          <span class="hljs-comment">// un comportamiento anónimo</span>
]);
</code></pre>
<p>También puedes asociar comportamientos a traves de <a href="guide-concept-configurations.html">configuraciones</a> como el siguiente:</p>
<pre><code class="hljs php language-php">[
    <span class="hljs-string">'as myBehavior2'</span> =&gt; MyBehavior::className(),

    <span class="hljs-string">'as myBehavior3'</span> =&gt; [
        <span class="hljs-string">'class'</span> =&gt; MyBehavior::className(),
        <span class="hljs-string">'prop1'</span> =&gt; <span class="hljs-string">'value1'</span>,
        <span class="hljs-string">'prop2'</span> =&gt; <span class="hljs-string">'value2'</span>,
    ],
]
</code></pre>
<p>Para más detalles, por favor visita la sección <a href="guide-concept-configurations.html#configuration-format">Configuraciones</a>.</p>
<h2>Usando comportamientos  <span id="using-behaviors"></span><a href="#using-behaviors" class="hashlink">&para;</a></h2><p>Para poder utilizar un comportamiento, primero tienes que unirlo a un <span class="broken-link">yii\base\Component</span> según las instrucciones anteriores. Una vez que un comportamiento ha sido vinculado a un componente, su uso es sencillo.</p>
<p>Puedes usar a una variable <em>pública</em> o a una <a href="guide-concept-properties.html">propiedad</a> definida por un <code>getter</code> y/o un <code>setter</code>
del comportamiento a través del componente con el que se ha vinculado:</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">// "prop1" es una propiedad definida en la clase comportamiento</span>
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$component</span>-&gt;prop1;
<span class="hljs-variable">$component</span>-&gt;prop1 = <span class="hljs-variable">$value</span>;
</code></pre>
<p>También puedes llamar métodos <em>públicos</em> del comportamiento de una forma similar:</p>
<pre><code class="hljs php language-php"><span class="hljs-comment">// foo() es un método público definido dentro de la clase comportamiento</span>
<span class="hljs-variable">$component</span>-&gt;foo();
</code></pre>
<p>Como puedes ver, aunque <code>$component</code> no tiene definida <code>prop1</code> y <code>bar()</code>, que se pueden utilizar como si son parte
de la definición de componentes debido al comportamiento vinculado.</p>
<p>Si dos comportamientos definen la misma propiedad o método y ambos están vinculados con el mismo componente, el
comportamiento que ha sido vinculado <em>primero</em> tendrá preferencia cuando se esté accediendo a la propiedad o método.</p>
<p>Un comportamiento puede estar asociado con un nombre cuando se une a un componente. Si este es el caso, es posible
acceder al objeto de comportamiento mediante el nombre, como se muestra a continuación,</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$behavior</span> = <span class="hljs-variable">$component</span>-&gt;getBehavior(<span class="hljs-string">'myBehavior'</span>);
</code></pre>
<p>También puedes acceder a todos los comportamientos vinculados al componente:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$behaviors</span> = <span class="hljs-variable">$component</span>-&gt;getBehaviors();
</code></pre>
<h2>Desasociar Comportamientos  <span id="detaching-behaviors"></span><a href="#detaching-behaviors" class="hashlink">&para;</a></h2><p>Para desasociar un comportamiento, puedes llamar el método <span class="broken-link">yii\base\Component::detachBehavior()</span> con el nombre con el
que se le asoció:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$component</span>-&gt;detachBehavior(<span class="hljs-string">'myBehavior1'</span>);
</code></pre>
<p>También puedes desvincular <em>todos</em> los comportamientos:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$component</span>-&gt;detachBehaviors();
</code></pre>
<h2>Utilizando <code>TimestampBehavior</code>  <span id="using-timestamp-behavior"></span><a href="#using-timestamp-behavior" class="hashlink">&para;</a></h2><p>Para terminar, vamos a echar un vistazo a <span class="broken-link">yii\behaviors\TimestampBehavior</span>. Este comportamiento soporta de forma
automática la actualización de atributos timestamp de un modelo <span class="broken-link">yii\db\ActiveRecord</span>
(Active Record) en cualquier momento donde se guarda el modelo (ej., en la inserción o actualización).</p>
<p>Primero, vincula este comportamiento a la clase <span class="broken-link">yii\db\ActiveRecord</span> que desees utilizar.</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">namespace</span> <span class="hljs-title">app</span>\<span class="hljs-title">models</span>\<span class="hljs-title">User</span>;

<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">db</span>\<span class="hljs-title">ActiveRecord</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">behaviors</span>\<span class="hljs-title">TimestampBehavior</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">User</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ActiveRecord</span>
</span>{
    <span class="hljs-comment">// ...</span>

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">behaviors</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> [
            [
                <span class="hljs-string">'class'</span> =&gt; TimestampBehavior::className(),
                <span class="hljs-string">'attributes'</span> =&gt; [
                    ActiveRecord::EVENT_BEFORE_INSERT =&gt; [<span class="hljs-string">'created_at'</span>, <span class="hljs-string">'updated_at'</span>],
                    ActiveRecord::EVENT_BEFORE_UPDATE =&gt; [<span class="hljs-string">'updated_at'</span>],
                ],
            ],
        ];
    }
}
</code></pre>
<p>La configuración del comportamiento anterior especifica que</p>
<ul>
<li>cuando el registro está siendo insertado, el comportamiento debe asignar el sello de tiempo actual a los atributos
<code>created_at</code> y <code>updated_at</code>;</li>
<li>cuando el registro está siendo actualizado, el comportamiento debe asignar el sello de tiempo actual al atributo
<code>updated_at</code>.</li>
</ul>
<p>Ahora si tienes un objeto <code>User</code> e intentas guardarlo, descubrirás que sus campos <code>created_at</code> y <code>updated_at</code> están
automáticamente actualizados con el sello de tiempo actual:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$user</span> = <span class="hljs-keyword">new</span> User;
<span class="hljs-variable">$user</span>-&gt;email = <span class="hljs-string">'test@example.com'</span>;
<span class="hljs-variable">$user</span>-&gt;save();
<span class="hljs-keyword">echo</span> <span class="hljs-variable">$user</span>-&gt;created_at;  <span class="hljs-comment">// muestra el sello tiempo actual (timestamp)</span>
</code></pre>
<p>El comportamiento <span class="broken-link">yii\behaviors\TimestampBehavior</span> también ofrece un método muy útil llamado
<span class="broken-link">yii\behaviors\TimestampBehavior::touch()</span>, que asigna el sello de tiempo actual a un atributo especificado y lo guarda automáticamente en la base de datos:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$user</span>-&gt;touch(<span class="hljs-string">'login_time'</span>);
</code></pre>
<h2>Comparación con Traits  <span id="comparison-with-traits"></span><a href="#comparison-with-traits" class="hashlink">&para;</a></h2><p>Mientras que los comportamientos son similares a <a href="http://www.php.net/traits">traits</a> en cuanto que ambos "inyectan" sus
métodos  y propiedades a la clase primaria, son diferentes en muchos aspectos. Tal y como se describe abajo, los dos
tienen sus ventajas y desventajas. Son más como complementos el uno al otro en lugar de alternativas.</p>
<h3>Razones para utilizar comportamientos  <span id="pros-for-behaviors"></span><a href="#pros-for-behaviors" class="hashlink">&para;</a></h3><p>Las clases de comportamientos, como todas las clases, soportan herencias. Traits, por otro lado, pueden ser
considerados como un copia-y-pega de PHP. Ellos no soportan la herencia de clases.</p>
<p>Los comportamientos pueden ser asociados y desasociados a un componente dinámicamente sin necesidad de que la clase del
componente sea modificada. Para usar un trait, debes modificar la clase que la usa.</p>
<p>Los comportamientos son configurables mientras que los traits no.</p>
<p>Los comportamientos pueden personalizar la ejecución de un componente al responder a sus eventos.</p>
<p>Cuando hay un conflicto de nombre entre los diferentes comportamientos vinculados a un mismo componente, el conflicto es
automáticamente resuelto respetando al que ha sido asociado primero.
El conflicto de nombres en traits requiere que manualmente sean resueltos cambiando el nombre de las propiedades o métodos afectados.</p>
<h3>Razones para utilizar los Traits  <span id="pros-for-traits"></span><a href="#pros-for-traits" class="hashlink">&para;</a></h3><p>Los Traits son mucho más eficientes que los comportamientos debido a que los últimos son objetos que consumen tiempo y
memoria.</p>
<p>Los IDEs (Programas de desarrollo) son más amigables con traits ya que son una construcción del lenguaje nativo.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 22 Mar 2017 18:28:18 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
