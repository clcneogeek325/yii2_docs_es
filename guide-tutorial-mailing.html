<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/ef5db663/css/bootstrap.css" rel="stylesheet">
<link href="./assets/c596327a/solarized_light.css" rel="stylesheet">
<link href="./assets/956f8f39/style.css" rel="stylesheet">
<script src="./assets/2f771e29/jquery.js"></script>
<script src="./assets/ef5db663/js/bootstrap.js"></script>
<script src="./assets/b35220fb/jssearch.js"></script>    <title>Envío de correos electrónicos - Temas especiales - The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w178" class="navbar-inverse navbar-fixed-top navbar" role="navigation"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w178-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w178-collapse" class="collapse navbar-collapse"><ul id="w179" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-162" data-toggle="collapse" data-parent="#navigation">Introducción <b class="caret"></b></a><div id="navigation-162" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-intro-yii.html">Acerca de Yii</a>
<a class="list-group-item" href="./guide-intro-upgrade-from-v1.html">Actualizar desde Yii 1.1</a></div>
<a class="list-group-item" href="#navigation-163" data-toggle="collapse" data-parent="#navigation">Primeros pasos <b class="caret"></b></a><div id="navigation-163" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-start-installation.html">Instalar Yii</a>
<a class="list-group-item" href="./guide-start-workflow.html">Funcionamiento de aplicaciones</a>
<a class="list-group-item" href="./guide-start-hello.html">Hola a todos</a>
<a class="list-group-item" href="./guide-start-forms.html">Trabajar con formularios</a>
<a class="list-group-item" href="./guide-start-databases.html">Trabajar con bases de datos</a>
<a class="list-group-item" href="./guide-start-gii.html">Generar códigos con Gii</a>
<a class="list-group-item" href="./guide-start-looking-ahead.html">Adentrarse en Yii</a></div>
<a class="list-group-item" href="#navigation-164" data-toggle="collapse" data-parent="#navigation">Estructura de una aplicación <b class="caret"></b></a><div id="navigation-164" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-structure-overview.html">Información general</a>
<a class="list-group-item" href="./guide-structure-entry-scripts.html">Script de entrada</a>
<a class="list-group-item" href="./guide-structure-applications.html">Aplicaciones</a>
<a class="list-group-item" href="./guide-structure-application-components.html">Componentes de una aplicación</a>
<a class="list-group-item" href="./guide-structure-controllers.html">Controladores</a>
<a class="list-group-item" href="./guide-structure-models.html">Modelos</a>
<a class="list-group-item" href="./guide-structure-views.html">Vistas</a>
<a class="list-group-item" href="./guide-structure-filters.html">Filtros</a>
<a class="list-group-item" href="./guide-structure-widgets.html">Widgets</a>
<a class="list-group-item" href="./guide-structure-modules.html">Módulos</a>
<a class="list-group-item" href="./guide-structure-assets.html">Assets</a>
<a class="list-group-item" href="./guide-structure-extensions.html">Extensiones</a></div>
<a class="list-group-item" href="#navigation-165" data-toggle="collapse" data-parent="#navigation">Gestión de las peticiones <b class="caret"></b></a><div id="navigation-165" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-runtime-overview.html">Información general</a>
<a class="list-group-item" href="./guide-runtime-bootstrapping.html">Bootstrapping</a>
<a class="list-group-item" href="./guide-runtime-routing.html">Routing y Creación de las URL</a>
<a class="list-group-item" href="./guide-runtime-requests.html">Peticiones (Requests)</a>
<a class="list-group-item" href="./guide-runtime-responses.html">Respuestas (Responses)</a>
<a class="list-group-item" href="./guide-runtime-sessions-cookies.html">Sesiones (Sessions) y Cookies</a>
<a class="list-group-item" href="./guide-runtime-handling-errors.html">Gestión de errores</a>
<a class="list-group-item" href="./guide-runtime-logging.html">Registro de anotaciones</a></div>
<a class="list-group-item" href="#navigation-166" data-toggle="collapse" data-parent="#navigation">Conceptos clave <b class="caret"></b></a><div id="navigation-166" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-concept-components.html">Componentes</a>
<a class="list-group-item" href="./guide-concept-properties.html">Propiedades</a>
<a class="list-group-item" href="./guide-concept-events.html">Eventos</a>
<a class="list-group-item" href="./guide-concept-behaviors.html">Comportamientos (Behaviors)</a>
<a class="list-group-item" href="./guide-concept-configurations.html">Configuraciones</a>
<a class="list-group-item" href="./guide-concept-aliases.html">Alias</a>
<a class="list-group-item" href="./guide-concept-autoloading.html">Autocarga de clases</a>
<a class="list-group-item" href="./guide-concept-service-locator.html">Localizador de servicios (Service Locator)</a>
<a class="list-group-item" href="./guide-concept-di-container.html">Contenedor de inyección de dependencia</a></div>
<a class="list-group-item" href="#navigation-167" data-toggle="collapse" data-parent="#navigation">Trabajar con bases de datos <b class="caret"></b></a><div id="navigation-167" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-db-dao.html">Objeto de acceso a datos</a>
<a class="list-group-item" href="./guide-db-query-builder.html">Constructor de consultas</a>
<a class="list-group-item" href="./guide-db-active-record.html">Active Record</a>
<a class="list-group-item" href="./guide-db-migrations.html">Migraciones</a>
<a class="list-group-item" href="./guide-db-sphinx.html">Sphinx</a>
<a class="list-group-item" href="./guide-db-redis.html">Redis</a>
<a class="list-group-item" href="./guide-db-mongodb.html">MongoDB</a>
<a class="list-group-item" href="./guide-db-elastic-search.html">ElasticSearch</a></div>
<a class="list-group-item" href="#navigation-168" data-toggle="collapse" data-parent="#navigation">Obtener datos de los usuarios <b class="caret"></b></a><div id="navigation-168" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-input-forms.html">Crear formularios</a>
<a class="list-group-item" href="./guide-input-validation.html">Validar datos</a>
<a class="list-group-item" href="./guide-input-file-upload.html">Subir archivos</a>
<a class="list-group-item" href="./guide-input-tabular-input.html">Recogida de tabular input</a>
<a class="list-group-item" href="./guide-input-multiple-models.html">Obtener datos para múltiples modelos</a></div>
<a class="list-group-item" href="#navigation-169" data-toggle="collapse" data-parent="#navigation">Visualizar datos <b class="caret"></b></a><div id="navigation-169" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-output-formatting.html">Formato de datos</a>
<a class="list-group-item" href="./guide-output-pagination.html">Paginación</a>
<a class="list-group-item" href="./guide-output-sorting.html">Ordenación</a>
<a class="list-group-item" href="./guide-output-data-providers.html">Proveedores de datos</a>
<a class="list-group-item" href="./guide-output-data-widgets.html">Widgets de datos</a>
<a class="list-group-item" href="./guide-output-client-scripts.html">Trabajar con scripts de cliente</a>
<a class="list-group-item" href="./guide-output-theming.html">Temas</a></div>
<a class="list-group-item" href="#navigation-170" data-toggle="collapse" data-parent="#navigation">Seguridad <b class="caret"></b></a><div id="navigation-170" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-security-authentication.html">Autenticación</a>
<a class="list-group-item" href="./guide-security-authorization.html">Autorización</a>
<a class="list-group-item" href="./guide-security-passwords.html">Trabajar con contraseñas</a>
<a class="list-group-item" href="./guide-security-auth-clients.html">Autenticar Clientes</a>
<a class="list-group-item" href="./guide-security-best-practices.html">Buenas prácticas</a></div>
<a class="list-group-item" href="#navigation-171" data-toggle="collapse" data-parent="#navigation">Caché <b class="caret"></b></a><div id="navigation-171" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-caching-overview.html">Información general</a>
<a class="list-group-item" href="./guide-caching-data.html">Caché de datos</a>
<a class="list-group-item" href="./guide-caching-fragment.html">Caché de fragmentos</a>
<a class="list-group-item" href="./guide-caching-page.html">Caché de páginas</a>
<a class="list-group-item" href="./guide-caching-http.html">Caché HTTP</a></div>
<a class="list-group-item" href="#navigation-172" data-toggle="collapse" data-parent="#navigation">Servicios Web RESTful <b class="caret"></b></a><div id="navigation-172" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-rest-quick-start.html">Guía breve</a>
<a class="list-group-item" href="./guide-rest-resources.html">Recursos (Resources)</a>
<a class="list-group-item" href="./guide-rest-controllers.html">Controladores</a>
<a class="list-group-item" href="./guide-rest-routing.html">Gestión de rutas</a>
<a class="list-group-item" href="./guide-rest-response-formatting.html">Formateo de respuestas</a>
<a class="list-group-item" href="./guide-rest-authentication.html">Autenticación</a>
<a class="list-group-item" href="./guide-rest-rate-limiting.html">Límite de Rango</a>
<a class="list-group-item" href="./guide-rest-versioning.html">Gestión de versiones</a>
<a class="list-group-item" href="./guide-rest-error-handling.html">Gestión de errores</a></div>
<a class="list-group-item" href="#navigation-173" data-toggle="collapse" data-parent="#navigation">Herramientas de Desarrollo <b class="caret"></b></a><div id="navigation-173" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-debug/blob/master/docs/guide-es/README.md">Depurador y Barra de Herramientas de Depuración</a>
<a class="list-group-item" href="./guide-tool-gii.html">Generación de códigos con Gii</a>
<a class="list-group-item" href="./guide-tool-api-doc.html">Generación de documentación de API</a></div>
<a class="list-group-item" href="#navigation-174" data-toggle="collapse" data-parent="#navigation">Pruebas <b class="caret"></b></a><div id="navigation-174" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-test-overview.html">Información general</a>
<a class="list-group-item" href="./guide-test-environment-setup.html">Configuración del entorno de pruebas</a>
<a class="list-group-item" href="./guide-test-unit.html">Pruebas unitarias</a>
<a class="list-group-item" href="./guide-test-functional.html">Pruebas funcionales</a>
<a class="list-group-item" href="./guide-test-acceptance.html">Pruebas de aceptación</a>
<a class="list-group-item" href="./guide-test-fixtures.html">Fixtures</a></div>
<a class="list-group-item active" href="#navigation-175" data-toggle="collapse" data-parent="#navigation">Temas especiales <b class="caret"></b></a><div id="navigation-175" class="submenu panel-collapse collapse in"><a class="list-group-item" href="./guide-tutorial-advanced-app.html">Plantilla aplicación avanzada</a>
<a class="list-group-item" href="./guide-tutorial-start-from-scratch.html">Creación de una aplicación desde cero</a>
<a class="list-group-item" href="./guide-tutorial-console.html">Comandos de consola</a>
<a class="list-group-item" href="./guide-tutorial-core-validators.html">Validadores del núcleo</a>
<a class="list-group-item" href="./guide-tutorial-i18n.html">Internacionalización</a>
<a class="list-group-item active" href="./guide-tutorial-mailing.html">Envío de correos electrónicos</a>
<a class="list-group-item" href="./guide-tutorial-performance-tuning.html">Mejora del rendimiento</a>
<a class="list-group-item" href="./guide-tutorial-shared-hosting.html">Entorno de alojamiento compartido</a>
<a class="list-group-item" href="./guide-tutorial-template-engines.html">Motores de plantillas</a>
<a class="list-group-item" href="./guide-tutorial-yii-integration.html">Trabajar con Código de Terceros</a></div>
<a class="list-group-item" href="#navigation-176" data-toggle="collapse" data-parent="#navigation">Widgets <b class="caret"></b></a><div id="navigation-176" class="submenu panel-collapse collapse"><a class="list-group-item" href="https://github.com/yiisoft/yii2-bootstrap/blob/master/docs/guide-es/README.md">Bootstrap Widgets</a>
<a class="list-group-item" href="https://github.com/yiisoft/yii2-jui/blob/master/docs/guide-es/README.md">Jquery UI Widgets</a></div>
<a class="list-group-item" href="#navigation-177" data-toggle="collapse" data-parent="#navigation">Clases auxiliares <b class="caret"></b></a><div id="navigation-177" class="submenu panel-collapse collapse"><a class="list-group-item" href="./guide-helper-overview.html">Información general</a>
<a class="list-group-item" href="./guide-helper-array.html">ArrayHelper</a>
<a class="list-group-item" href="./guide-helper-html.html">Html</a>
<a class="list-group-item" href="./guide-helper-url.html">Url</a></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Envío de Emails <span id="envio-de-emails"></span><a href="#envio-de-emails" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#configuracion">Configuración</a></li>
<li><a href="#uso-basico">Uso Básico</a></li>
<li><a href="#componer-el-contenido-del-mensaje">Componer el contenido del mensaje</a></li>
<li><a href="#adjuntar-archivos">Adjuntar archivos</a></li>
<li><a href="#incrustar-imagenes">Incrustar imágenes</a></li>
<li><a href="#testear-y-depurar">Testear y depurar</a></li>
<li><a href="#crear-tu-solucion-personalizada-de-correo">Crear tu solución personalizada de correo</a></li></ol></div>
<blockquote class="note"><p><strong>Note: </strong>Esta sección se encuentra en desarrollo.</p>
</blockquote>
<p>Yii soporta composición y envío de emails. De cualquier modo, el núcleo del framework provee
sólo la funcionalidad de composición y una interfaz básica. En mecanismo de envío en sí debería
ser provisto por la extensión, dado que diferentes proyectos pueden requerir diferente implementación y esto
usualmente depende de servicios y librerías externas.</p>
<p>Para la mayoría de los casos, puedes utilizar la extensión oficial <a href="https://github.com/yiisoft/yii2-swiftmailer">yii2-swiftmailer</a>.</p>
<h2>Configuración <span id="configuracion"></span><a href="#configuracion" class="hashlink">&para;</a></h2><p>La configuración del componente Mail depende de la extensión que hayas elegido.
En general, la configuración de tu aplicación debería verse así:</p>
<pre><code class="hljs php language-php"><span class="hljs-keyword">return</span> [
    <span class="hljs-comment">//....</span>
    <span class="hljs-string">'components'</span> =&gt; [
        <span class="hljs-string">'mailer'</span> =&gt; [
            <span class="hljs-string">'class'</span> =&gt; <span class="hljs-string">'yii\swiftmailer\Mailer'</span>,
        ],
    ],
];
</code></pre>
<h2>Uso Básico <span id="uso-basico"></span><a href="#uso-basico" class="hashlink">&para;</a></h2><p>Una vez configurado el componente 'mailer', puedes utilizar el siguiente código para enviar un correo electrónico:</p>
<pre><code class="hljs php language-php">Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose()
    -&gt;setFrom(<span class="hljs-string">'from@domain.com'</span>)
    -&gt;setTo(<span class="hljs-string">'to@domain.com'</span>)
    -&gt;setSubject(<span class="hljs-string">'Asunto del mensaje'</span>)
    -&gt;setTextBody(<span class="hljs-string">'Contenido en texto plano'</span>)
    -&gt;setHtmlBody(<span class="hljs-string">'&lt;b&gt;Contenido HTML&lt;/b&gt;'</span>)
    -&gt;send();
</code></pre>
<p>En el ejemplo anterior, el método <code>compose()</code> crea una instancia del mensaje de correo, el cual puede ser llenado y enviado.
En caso de ser necesario, puedes agregar una lógica más compleja en el proceso:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$message</span> = Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose();
<span class="hljs-keyword">if</span> (Yii::<span class="hljs-variable">$app</span>-&gt;user-&gt;isGuest) {
    <span class="hljs-variable">$message</span>-&gt;setFrom(<span class="hljs-string">'from@domain.com'</span>)
} <span class="hljs-keyword">else</span> {
    <span class="hljs-variable">$message</span>-&gt;setFrom(Yii::<span class="hljs-variable">$app</span>-&gt;user-&gt;identity-&gt;email)
}
<span class="hljs-variable">$message</span>-&gt;setTo(Yii::<span class="hljs-variable">$app</span>-&gt;params[<span class="hljs-string">'adminEmail'</span>])
    -&gt;setSubject(<span class="hljs-string">'Asunto del mensaje'</span>)
    -&gt;setTextBody(<span class="hljs-string">'Contenido en texto plano'</span>)
    -&gt;send();
</code></pre>
<blockquote class="note"><p><strong>Note: </strong>cada extensión 'mailer' viene en dos grandes clases: 'Mailer' y 'Message'. 'Mailer' siempre conoce
  el nombre de clase especifico de 'Message'. No intentes instanciar el objeto 'Message' directamente -
  siempre utiliza el método <code>compose()</code> para ello.</p>
</blockquote>
<p>Puedes también enviar varios mensajes al mismo tiempo:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$messages</span> = [];
<span class="hljs-keyword">foreach</span> (<span class="hljs-variable">$users</span> <span class="hljs-keyword">as</span> <span class="hljs-variable">$user</span>) {
    <span class="hljs-variable">$messages</span>[] = Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose()
        <span class="hljs-comment">// ...</span>
        -&gt;setTo(<span class="hljs-variable">$user</span>-&gt;email);
}
Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;sendMultiple(<span class="hljs-variable">$messages</span>);
</code></pre>
<p>Algunas extensiones en particular pueden beneficiarse de este enfoque, utilizando mensaje simple de red, etc.</p>
<h2>Componer el contenido del mensaje <span id="componer-el-contenido-del-mensaje"></span><a href="#componer-el-contenido-del-mensaje" class="hashlink">&para;</a></h2><p>Yii permite componer el contenido de los mensajes de correo a través de archivos de vista especiales.
Por defecto, estos archivos deben estar ubicados en la ruta '@app/mail'.</p>
<p>Ejemplo de archivo de contenido de correo:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">helpers</span>\<span class="hljs-title">Html</span>;
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">helpers</span>\<span class="hljs-title">Url</span>;


<span class="hljs-comment">/* <span class="hljs-doctag">@var</span> $this \yii\web\View instancia del componente view */</span>
<span class="hljs-comment">/* <span class="hljs-doctag">@var</span> $message \yii\mail\BaseMessage instancia del mensaje de correo recién creado */</span>

<span class="hljs-preprocessor">?&gt;</span>
&lt;h2&gt;Este mensaje te permite visitar nuestro sitio con un sólo click&lt;/h2&gt;
<span class="hljs-preprocessor">&lt;?</span>= Html::a(<span class="hljs-string">'Ve a la página principal'</span>, Url::home(<span class="hljs-string">'http'</span>)) <span class="hljs-preprocessor">?&gt;</span>
</code></pre>
<p>Para componer el contenido del mensaje utilizando un archivo, simplemente pasa el nombre de la vista al método <code>compose()</code>:</p>
<pre><code class="hljs php language-php">Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose(<span class="hljs-string">'home-link'</span>) <span class="hljs-comment">// el resultado del renderizado de la vista se transforma en el cuerpo del mensaje aquí</span>
    -&gt;setFrom(<span class="hljs-string">'from@domain.com'</span>)
    -&gt;setTo(<span class="hljs-string">'to@domain.com'</span>)
    -&gt;setSubject(<span class="hljs-string">'Asunto del mensaje'</span>)
    -&gt;send();
</code></pre>
<p>Puedes pasarle parámetros adicionales a la vista en el método <code>compose()</code>, los cuales estarán disponibles dentro de las vistas:</p>
<pre><code class="hljs php language-php">Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose(<span class="hljs-string">'greetings'</span>, [
    <span class="hljs-string">'user'</span> =&gt; Yii::<span class="hljs-variable">$app</span>-&gt;user-&gt;identity,
    <span class="hljs-string">'advertisement'</span> =&gt; <span class="hljs-variable">$adContent</span>,
]);
</code></pre>
<p>Puedes especificar diferentes archivos de vista para el contenido del mensaje en HTML y texto plano:</p>
<pre><code class="hljs php language-php">Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose([
    <span class="hljs-string">'html'</span> =&gt; <span class="hljs-string">'contact-html'</span>,
    <span class="hljs-string">'text'</span> =&gt; <span class="hljs-string">'contact-text'</span>,
]);
</code></pre>
<p>Si especificas el nombre de la vista como un string, el resultado de su renderización será utilizado como cuerpo HTML, mientras
que el cuerpo en texto plano será compuesto removiendo todas las entidades HTML del anterior.</p>
<p>El resultado de la renderización de la vista puede ser envuelta en el layout, que puede ser definido utiliazando <span class="broken-link">yii\mail\BaseMailer::htmlLayout</span>
y <span class="broken-link">yii\mail\BaseMailer::textLayout</span>. Esto funciona igual a como funcionan los layouts en una aplicación web normal.
El layout puede utilizar estilos CSS u otros contenidos compartidos:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">yii</span>\<span class="hljs-title">helpers</span>\<span class="hljs-title">Html</span>;

<span class="hljs-comment">/* <span class="hljs-doctag">@var</span> $this \yii\web\View instancia del componente view */</span>
<span class="hljs-comment">/* <span class="hljs-doctag">@var</span> $message \yii\mail\MessageInterface el mensaje siendo compuesto */</span>
<span class="hljs-comment">/* <span class="hljs-doctag">@var</span> $content string el resultado de la renderización de la vista principal */</span>
<span class="hljs-preprocessor">?&gt;</span>
<span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-variable">$this</span>-&gt;beginPage() <span class="hljs-preprocessor">?&gt;</span>
&lt;!DOCTYPE html <span class="hljs-keyword">PUBLIC</span> <span class="hljs-string">"-//W3C//DTD XHTML 1.0 Strict//EN"</span> <span class="hljs-string">"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"</span>&gt;
&lt;html xmlns=<span class="hljs-string">"http://www.w3.org/1999/xhtml"</span>&gt;
&lt;head&gt;
    &lt;meta http-equiv=<span class="hljs-string">"Content-Type"</span> content=<span class="hljs-string">"text/html; charset=&lt;?= Yii::$app-&gt;charset ?&gt;"</span> /&gt;
    &lt;style type=<span class="hljs-string">"text/css"</span>&gt;
        .heading {...}
        .<span class="hljs-keyword">list</span> {...}
        .footer {...}
    &lt;/style&gt;
    <span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-variable">$this</span>-&gt;head() <span class="hljs-preprocessor">?&gt;</span>
&lt;/head&gt;
&lt;body&gt;
    <span class="hljs-preprocessor">&lt;?php</span> <span class="hljs-variable">$this</span>-&gt;beginBody() <span class="hljs-preprocessor">?&gt;</span>
    <span class="hljs-preprocessor">&lt;?</span>= <span class="hljs-variable">$content</span> <span class="hljs-preprocessor">?&gt;</span>
    &lt;div <span class="hljs-class"><span class="hljs-keyword">class</span>="<span class="hljs-title">footer</span>"&gt;<span class="hljs-title">Saludos</span> <span class="hljs-title">cordiales</span>, <span class="hljs-title">el</span> <span class="hljs-title">equipo</span> <span class="hljs-title">de</span>&lt;?= <span class="hljs-title">Yii</span>::$<span class="hljs-title">app</span>-&gt;<span class="hljs-title">name</span> ?&gt;&lt;/<span class="hljs-title">div</span>&gt;
    &lt;?<span class="hljs-title">php</span> $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">endBody</span>() ?&gt;
&lt;/<span class="hljs-title">body</span>&gt;
&lt;/<span class="hljs-title">html</span>&gt;
&lt;?<span class="hljs-title">php</span> $<span class="hljs-title">this</span>-&gt;<span class="hljs-title">endPage</span>() ?&gt;
</span></code></pre>
<h2>Adjuntar archivos <span id="adjuntar-archivos"></span><a href="#adjuntar-archivos" class="hashlink">&para;</a></h2><p>Puedes adjuntar archivos al mensaje utilizando los métodos <code>attach()</code> y <code>attachContent()</code>:</p>
<pre><code class="hljs php language-php"><span class="hljs-variable">$message</span> = Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose();

<span class="hljs-comment">// Adjunta un archivo del sistema local de archivos:</span>
<span class="hljs-variable">$message</span>-&gt;attach(<span class="hljs-string">'/path/to/file.pdf'</span>);

<span class="hljs-comment">// Crear adjuntos sobre la marcha</span>
<span class="hljs-variable">$message</span>-&gt;attachContent(<span class="hljs-string">'Contenido adjunto'</span>, [<span class="hljs-string">'fileName'</span> =&gt; <span class="hljs-string">'attach.txt'</span>, <span class="hljs-string">'contentType'</span> =&gt; <span class="hljs-string">'text/plain'</span>]);
</code></pre>
<h2>Incrustar imágenes <span id="incrustar-imagenes"></span><a href="#incrustar-imagenes" class="hashlink">&para;</a></h2><p>Puedes incrustar imágenes en el mensaje utilizando el método <code>embed()</code>. Este método devuelve el id del adjunto,
que debería ser utilizado como tag 'img'.
Este método es fácil de utilizar al componer mensajes a través de un archivo de vista:</p>
<pre><code class="hljs php language-php">Yii::<span class="hljs-variable">$app</span>-&gt;mailer-&gt;compose(<span class="hljs-string">'embed-email'</span>, [<span class="hljs-string">'imageFileName'</span> =&gt; <span class="hljs-string">'/path/to/image.jpg'</span>])
    <span class="hljs-comment">// ...</span>
    -&gt;send();
</code></pre>
<p>Entonces, dentro de tu archivo de vista, puedes utilizar el siguiente código:</p>
<pre><code class="hljs php language-php">&lt;img src=<span class="hljs-string">"&lt;?= $message-&gt;embed($imageFileName); ?&gt;"</span>&gt;
</code></pre>
<h2>Testear y depurar <span id="testear-y-depurar"></span><a href="#testear-y-depurar" class="hashlink">&para;</a></h2><p>Un desarrollador a menudo necesita comprobar qué emails están siendo enviados por la aplicación, cuál es su contenido y otras cosas.
Yii concede dicha habilidad vía <code>yii\mail\BaseMailer::useFileTransport</code>. Si se habilita, esta opción hace que
los datos del mensaje sean guardados en archivos locales en vez de enviados. Esos archivos serán guardados bajo
<code>yii\mail\BaseMailer::fileTransportPath</code>, que por defecto es '@runtime/mail'.</p>
<blockquote class="note"><p><strong>Note: </strong>puedes o bien guardar los mensajes en archivos, o enviarlos a sus receptores correspondientes, pero no puedes hacer las dos cosas al mismo tiempo.</p>
</blockquote>
<p>Un archivo de mensaje puede ser abierto por un editor de texto común, de modo que puedas ver sus cabeceras, su contenido y demás.
Este mecanismo en sí puede comprobarse al depurar la aplicación o al ejecutar un test de unidad.</p>
<blockquote class="note"><p><strong>Note: </strong>el archivo de contenido de mensaje es compuesto vía <code>\yii\mail\MessageInterface::toString()</code>, por lo que depende de la extensión
  actual de correo utilizada en tu aplicación.</p>
</blockquote>
<h2>Crear tu solución personalizada de correo <span id="crear-tu-solucion-personalizada-de-correo"></span><a href="#crear-tu-solucion-personalizada-de-correo" class="hashlink">&para;</a></h2><p>Para crear tu propia solución de correo, necesitas crear 2 clases: una para 'Mailer' y
otra para 'Message'.
Puedes utilizar <code>yii\mail\BaseMailer</code> y <code>yii\mail\BaseMessage</code> como clases base de tu solución. Estas clases
ya contienen un lógica básica, la cual se describe en esta guía. De cualquier modo, su utilización no es obligatoria, es suficiente
con implementar las interfaces <code>yii\mail\MailerInterface</code> y <code>yii\mail\MessageInterface</code>.
Luego necesitas implementar todos los métodos abstractos para construir tu solución.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Wed, 22 Mar 2017 18:28:18 +0000</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script type="text/javascript">jQuery(document).ready(function () {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
